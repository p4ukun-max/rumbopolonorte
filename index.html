<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rumbo al Polo Norte</title>
<style>
html,body{margin:0;overflow:hidden;background:#061526}
canvas{display:block}
</style>
</head>

<body>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let W,H,scale;
function resize(){
  W=innerWidth;H=innerHeight;
  canvas.width=W;canvas.height=H;
  scale=Math.min(W/360,1.2);
}
resize();
addEventListener("resize",resize);

/* IMÃGENES */
const santaImg=new Image();
const icebergImg=new Image();
const finalImg=new Image();
   santaImg.src   = "https://www.dropbox.com/scl/fi/ncvfs2yf0v0qtvuhkbhlj/tirineo_1.png?rlkey=06psxs9942im1y7usdg0qgczb&st=wjmlwyyu&dl=1";
    icebergImg.src = "https://www.dropbox.com/scl/fi/t0jk7vrotgrykx912v5le/hielo.png?rlkey=9z8pxtztv5q9ogdbpc68qet58&st=gtcq7vwj&dl=1";
    finalImg.src   = "https://www.dropbox.com/scl/fi/jc6y5ao7snuzqtrbrq4cb/noel.png?rlkey=ylj0pi9uuqcti2dk3fg2hxqsv&st=kufph32f&dl=1";

/* SANTA */
const santa={x:60,y:H/2,w:0,h:0,vy:0};
const gravity=0.45*scale;
const lift=-8*scale;
const speed=3*scale;
const SANTA_SCALE=0.12*scale;

/* JUEGO */
let pipes=[];
let finished=false;
let landed=false;
let interval;

/* ICEBERG */
function createIceberg(){
  finished=true;
  clearInterval(interval);
}

/* UPDATE */
function update(){
  santa.vy+=gravity;
  santa.y+=santa.vy;

  // suelo
  const fh=H*0.25;
  const groundY=H-fh-santa.h*0.1;

  if(finished && santa.y>=groundY){
    santa.y=groundY;
    santa.vy=0;
    landed=true;
  }
}

/* DRAW */
function draw(){
  ctx.fillStyle="#061526";
  ctx.fillRect(0,0,W,H);

  santa.w=santaImg.naturalWidth*SANTA_SCALE;
  santa.h=santaImg.naturalHeight*SANTA_SCALE;
  ctx.drawImage(santaImg,santa.x,santa.y,santa.w,santa.h);

  if(finished){
    const fh=H*0.25;
    const fw=finalImg.naturalWidth*(fh/finalImg.naturalHeight);
    ctx.drawImage(finalImg,W/2-fw/2,H-fh,fw,fh);
  }

  if(landed){
    ctx.fillStyle="rgba(0,0,0,0.6)";
    ctx.fillRect(0,H*0.35,W,120);

    ctx.fillStyle="#fff";
    ctx.font=`${42*scale}px serif`;
    ctx.textAlign="center";
    ctx.shadowColor="#7fffd4";
    ctx.shadowBlur=15;
    ctx.fillText("ðŸŽ„ Â¡JUEGO COMPLETADO! ðŸŽ„",W/2,H*0.35+75);
  }
}

/* LOOP */
function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();

/* INPUT */
addEventListener("pointerdown",()=>santa.vy=lift);

/* START */
interval=setTimeout(createIceberg,3000);
</script>
</body>
</html>
